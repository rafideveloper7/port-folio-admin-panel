import{r as x,a as Z,u as q,N as k,b as ee,L as _,O as se,B as te,d as ae,e as w,R as re}from"./vendor-223bb3f6.js";import{c as ne}from"./supabase-b49b2ca3.js";import{A as K,M as C,L as le,s as ie,f as M,T as oe,a as N,E as R,C as H,U as ce,b as de,B as xe,c as G,d as L,e as me,g as ge,R as D,h as ue,i as he,j as pe,X as be,k as fe,l as O,m as P,n as je,S as ye,H as Ne}from"./utils-f4c7b05b.js";import{R as F,L as ve,C as U,X as I,Y as T,T as B,a as we,B as ke,b as Ce}from"./charts-645d6f02.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();var W={exports:{}},A={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Se=x,Ae=Symbol.for("react.element"),De=Symbol.for("react.fragment"),Me=Object.prototype.hasOwnProperty,Re=Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ze={key:!0,ref:!0,__self:!0,__source:!0};function Y(s,t,r){var n,a={},l=null,i=null;r!==void 0&&(l=""+r),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(i=t.ref);for(n in t)Me.call(t,n)&&!ze.hasOwnProperty(n)&&(a[n]=t[n]);if(s&&s.defaultProps)for(n in t=s.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:Ae,type:s,key:l,ref:i,props:a,_owner:Re.current}}A.Fragment=De;A.jsx=Y;A.jsxs=Y;W.exports=A;var e=W.exports,z={},$=Z;z.createRoot=$.createRoot,z.hydrateRoot=$.hydrateRoot;const X="https://zdkkhhxtpmefaqmnartb.supabase.co",Ee="sb_publishable_QcPadl5j6UxFkHF87C9Giw_oZgfbLPK";console.log("Supabase URL:",X);console.log("Supabase Key:","Set");const y=ne(X,Ee,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storageKey:"admin-panel-auth",storage:localStorage}}),j={async signIn(s,t){console.log("Attempting sign in with:",s);const{data:r,error:n}=await y.auth.signInWithPassword({email:s.trim(),password:t});if(n)throw console.error("Sign in error:",n),n;return console.log("Sign in successful:",r.user.email),r},async signOut(){const{error:s}=await y.auth.signOut();if(s)throw s},async getSession(){const{data:s,error:t}=await y.auth.getSession();return t?(console.error("Session error:",t),null):s.session},async getUser(){const{data:s,error:t}=await y.auth.getUser();return t?(console.error("Get user error:",t),null):s.user},async isAdmin(){try{const s=await this.getUser();if(!s)return!1;const t=s.email==="rafideveloper7@gmail.com";return console.log("Admin check:",{email:s.email,isAdmin:t}),t}catch(s){return console.error("Admin check error:",s),!1}},onAuthStateChange(s){return y.auth.onAuthStateChange(s)}},Q=x.createContext({}),E=()=>x.useContext(Q),_e=({children:s})=>{const[t,r]=x.useState(null),[n,a]=x.useState(!0),[l,i]=x.useState(!1);x.useEffect(()=>{(async()=>{try{console.log("ðŸ” Initializing auth...");const c=await j.getSession();if(console.log("ðŸ“‹ Session found:",!!c),c){r(c.user);const d=await j.isAdmin();console.log("ðŸ‘‘ Admin check:",d),i(d),d||(console.log("âš ï¸ Not admin, signing out..."),await j.signOut(),r(null))}else console.log("âŒ No session found"),r(null),i(!1)}catch(c){console.error("ðŸš¨ Auth init error:",c),r(null),i(!1)}finally{a(!1),console.log("âœ… Auth initialization complete")}})();const{data:o}=j.onAuthStateChange(async(c,d)=>{var v;if(console.log("ðŸ”„ Auth state changed:",c,(v=d==null?void 0:d.user)==null?void 0:v.email),c==="SIGNED_IN"){const b=(d==null?void 0:d.user)||null;if(r(b),b){const u=await j.isAdmin();i(u),u||(await j.signOut(),r(null))}}else if(c==="SIGNED_OUT")r(null),i(!1);else if(c==="TOKEN_REFRESHED"){const b=(d==null?void 0:d.user)||null;if(r(b),b){const u=await j.isAdmin();i(u)}}a(!1)});return()=>{console.log("ðŸ§¹ Cleaning up auth listener"),o==null||o.subscription.unsubscribe()}},[]);const m={user:t,isAdmin:l,signIn:async(p,o)=>{a(!0);try{console.log("ðŸ” Attempting sign in...");const{user:c}=await j.signIn(p,o),d=await j.isAdmin();if(console.log("Admin check after login:",d),!d)throw console.log("âŒ Not admin, signing out..."),await j.signOut(),new Error("Access denied. Admin privileges required.");return r(c),i(!0),console.log("âœ… Sign in successful:",c.email),c}catch(c){throw console.error("ðŸš¨ Sign in error:",c),c}finally{a(!1)}},signOut:async()=>{console.log("ðŸšª Signing out..."),await j.signOut(),r(null),i(!1),console.log("âœ… Signed out")},loading:n};return e.jsx(Q.Provider,{value:m,children:s})},Le=()=>{const[s,t]=x.useState("rafideveloper7@gmail.com"),[r,n]=x.useState(""),[a,l]=x.useState(!1),[i,h]=x.useState(""),{signIn:g,user:m}=E(),p=q();if(m)return e.jsx(k,{to:"/dashboard"});const o=async c=>{c.preventDefault(),l(!0),h("");try{await g(s,r),p("/dashboard")}catch(d){console.error("Login error:",d),d.message.includes("Invalid login credentials")?h("Invalid email or password"):d.message.includes("Email not confirmed")?h("Please verify your email first"):d.message.includes("rate limit")?h("Too many attempts. Please try again later."):h(d.message||"Login failed. Please try again.")}finally{l(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-900 to-black p-4",children:e.jsxs("div",{className:"bg-gray-800/50 backdrop-blur-sm border border-green-500/20 rounded-2xl p-8 w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Admin Login"}),e.jsx("p",{className:"text-gray-400",children:"Access your contact form messages"})]}),e.jsxs("form",{onSubmit:o,className:"space-y-6",children:[i&&e.jsxs("div",{className:"flex items-center gap-3 bg-red-500/10 border border-red-500/30 rounded-lg p-4 animate-shake",children:[e.jsx(K,{className:"w-5 h-5 text-red-400 flex-shrink-0"}),e.jsx("p",{className:"text-red-400 text-sm",children:i})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-300 mb-2",children:[e.jsx(C,{size:16}),"Email Address"]}),e.jsx("input",{type:"email",value:s,onChange:c=>t(c.target.value),className:"w-full bg-gray-900/50 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-green-500/50 focus:border-transparent transition-all",placeholder:"admin@example.com",required:!0,disabled:a})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-300 mb-2",children:[e.jsx(le,{size:16}),"Password"]}),e.jsx("input",{type:"password",value:r,onChange:c=>n(c.target.value),className:"w-full bg-gray-900/50 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-green-500/50 focus:border-transparent transition-all",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",required:!0,disabled:a})]}),e.jsx("button",{type:"submit",disabled:a,className:`w-full bg-gradient-to-r from-green-500 to-emerald-500 text-white font-bold py-3 px-4 rounded-lg transition-all duration-300 ${a?"opacity-70 cursor-not-allowed":"hover:opacity-90 hover:scale-[1.02]"}`,children:a?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Signing in..."]}):"Sign In"}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-gray-400 text-sm",children:"Use your Supabase Auth credentials"})})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-700/50",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Make sure you've created the user in Supabase Authentication first"})})})]})})},S={async checkAuth(){const{data:s}=await y.auth.getSession();if(!s.session)throw new Error("Not authenticated");return!0},async getMessages(s=1,t=10,r={}){await this.checkAuth();const n=(s-1)*t,a=n+t-1;let l=y.from("contact_submissions").select("*",{count:"exact"}).order("created_at",{ascending:!1}).range(n,a);r.status&&r.status!=="all"&&(l=l.eq("status",r.status)),r.search&&(l=l.or(`name.ilike.%${r.search}%,email.ilike.%${r.search}%,subject.ilike.%${r.search}%`));const{data:i,error:h,count:g}=await l;if(h)throw console.error("Get messages error:",h),h;return{messages:i||[],total:g||0,page:s,totalPages:Math.ceil((g||0)/t)}},async getStatistics(){await this.checkAuth();const{data:s,error:t}=await y.from("contact_submissions").select("status, created_at");if(t)throw console.error("Statistics error:",t),t;const r=s||[],n=new Date,a=new Date(n.getTime()-24*60*60*1e3),l=new Date(n.getTime()-7*24*60*60*1e3);return{total:r.length,unread:r.filter(i=>i.status==="unread").length,replied:r.filter(i=>i.status==="replied").length,last24Hours:r.filter(i=>new Date(i.created_at)>a).length,last7Days:r.filter(i=>new Date(i.created_at)>l).length}},async updateMessage(s,t){await this.checkAuth();const{data:r,error:n}=await y.from("contact_submissions").update({...t,updated_at:new Date().toISOString()}).eq("id",s).select().single();if(n)throw console.error("Update error:",n),n;return r},async deleteMessage(s){await this.checkAuth();const{error:t}=await y.from("contact_submissions").delete().eq("id",s);if(t)throw console.error("Delete error:",t),t},async markAsRead(s){return this.updateMessage(s,{status:"read"})},async markAsReplied(s){return this.updateMessage(s,{status:"replied"})},async archiveMessage(s){return this.updateMessage(s,{status:"archived"})}},Oe=()=>{const[s,t]=x.useState({total:0,unread:0,replied:0,last24Hours:0,last7Days:0}),[r,n]=x.useState([]),[a,l]=x.useState([]),[i,h]=x.useState(!0);x.useEffect(()=>{g()},[]);const g=async()=>{h(!0);try{const o=await S.getStatistics();t(o);const c=await S.getMessages(1,5);n(c.messages||[]);const d=m();l(d)}catch(o){console.error("Failed to fetch dashboard data:",o)}finally{h(!1)}},m=()=>{const o=[],c=new Date;for(let d=6;d>=0;d--){const v=ie(c,d),b=M(v,"EEE"),u=Math.floor(Math.random()*10);o.push({name:b,messages:u})}return o},p=o=>s.total===0?0:Math.round(o/s.total*100);return i?e.jsx("div",{className:"flex justify-center items-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-green-500"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-white",children:"Dashboard"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Overview of your contact form messages"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-gray-800/50 border border-green-500/20 rounded-xl p-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Total Messages"}),e.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:s.total}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(oe,{size:14,className:"text-green-500"}),e.jsxs("span",{className:"text-green-400 text-sm",children:["+",s.last7Days," this week"]})]})]}),e.jsx(N,{className:"text-green-500",size:28})]})}),e.jsx("div",{className:"bg-gray-800/50 border border-blue-500/20 rounded-xl p-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Unread"}),e.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:s.unread}),e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"h-1 w-full bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${p(s.unread)}%`}})}),e.jsxs("p",{className:"text-blue-400 text-xs mt-1",children:[p(s.unread),"% of total"]})]})]}),e.jsx(C,{className:"text-blue-500",size:28})]})}),e.jsx("div",{className:"bg-gray-800/50 border border-emerald-500/20 rounded-xl p-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Replied"}),e.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:s.replied}),e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"h-1 w-full bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500 rounded-full",style:{width:`${p(s.replied)}%`}})}),e.jsxs("p",{className:"text-emerald-400 text-xs mt-1",children:[p(s.replied),"% of total"]})]})]}),e.jsx(R,{className:"text-emerald-500",size:28})]})}),e.jsx("div",{className:"bg-gray-800/50 border border-purple-500/20 rounded-xl p-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Last 24h"}),e.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:s.last24Hours}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(H,{size:14,className:"text-purple-500"}),e.jsx("span",{className:"text-purple-400 text-sm",children:"Active conversations"})]})]}),e.jsx(ce,{className:"text-purple-500",size:28})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700/50 rounded-xl p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Message Activity (Last 7 Days)"}),e.jsx(de,{className:"text-gray-400",size:20})]}),e.jsx("div",{className:"h-64",children:e.jsx(F,{width:"100%",height:"100%",children:e.jsxs(ve,{data:a,children:[e.jsx(U,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(I,{dataKey:"name",stroke:"#9CA3AF"}),e.jsx(T,{stroke:"#9CA3AF"}),e.jsx(B,{contentStyle:{backgroundColor:"#1F2937",border:"1px solid #374151",borderRadius:"8px"}}),e.jsx(we,{type:"monotone",dataKey:"messages",stroke:"#10B981",strokeWidth:2,dot:{stroke:"#10B981",strokeWidth:2,r:4},activeDot:{r:6}})]})})})]}),e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700/50 rounded-xl p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Recent Messages"}),e.jsx(N,{className:"text-gray-400",size:20})]}),e.jsx("div",{className:"space-y-4",children:r.length>0?r.map(o=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-900/30 rounded-lg hover:bg-gray-900/50 transition-colors",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-white truncate",children:o.name}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${o.status==="unread"?"bg-blue-500/20 text-blue-400":o.status==="replied"?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"}`,children:o.status})]}),e.jsx("p",{className:"text-sm text-gray-400 truncate",children:o.subject||"No subject"})]}),e.jsx("div",{className:"text-xs text-gray-500 ml-4",children:M(new Date(o.created_at),"MMM dd")})]},o.id)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(N,{size:32,className:"mx-auto text-gray-600 mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No recent messages"})]})})]})]}),e.jsxs("div",{className:"bg-gray-800/50 border border-gray-700/50 rounded-xl p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Status Distribution"}),e.jsx(xe,{className:"text-gray-400",size:20})]}),e.jsx("div",{className:"h-64",children:e.jsx(F,{width:"100%",height:"100%",children:e.jsxs(ke,{data:[{name:"Unread",value:s.unread,color:"#3B82F6"},{name:"Read",value:s.total-s.unread-s.replied,color:"#6B7280"},{name:"Replied",value:s.replied,color:"#10B981"},{name:"Archived",value:s.total-s.unread-s.replied,color:"#8B5CF6"}],children:[e.jsx(U,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(I,{dataKey:"name",stroke:"#9CA3AF"}),e.jsx(T,{stroke:"#9CA3AF"}),e.jsx(B,{contentStyle:{backgroundColor:"#1F2937",border:"1px solid #374151",borderRadius:"8px"}}),e.jsx(Ce,{dataKey:"value",fill:"#10B981",radius:[4,4,0,0]})]})})})]})]})},Pe=({message:s,statusColor:t,onStatusUpdate:r,onDelete:n})=>{const[a,l]=x.useState(!1),[i,h]=x.useState(!1),g=o=>{try{const c=new Date(o);return M(c,"MMM dd, yyyy â€¢ hh:mm a")}catch{return o}},m=async()=>{try{await navigator.clipboard.writeText(s.email),h(!0),setTimeout(()=>h(!1),2e3)}catch(o){console.error("Failed to copy:",o)}},p=o=>{r(s.id,o)};return e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium border ${t}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)}),e.jsx("span",{className:"text-lg font-semibold text-white truncate",children:s.subject||"No Subject"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{size:14}),e.jsx("span",{className:"font-medium text-gray-300",children:s.name})]}),e.jsxs("div",{className:"flex items-center gap-2 hover:text-green-400 cursor-pointer transition-colors",onClick:m,title:i?"Copied!":"Copy email",children:[e.jsx(C,{size:14}),e.jsx("span",{className:"truncate max-w-[200px]",children:s.email}),e.jsx(L,{size:12})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{size:14}),e.jsx("span",{children:g(s.created_at)})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:()=>l(!a),className:"p-2 hover:bg-gray-700/50 rounded-lg transition-colors",title:a?"Collapse":"Expand",children:a?e.jsx(me,{size:18}):e.jsx(ge,{size:18})})})]}),e.jsx("div",{className:"mt-4",children:e.jsx("p",{className:"text-gray-300 line-clamp-2",children:s.message})}),a&&e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-700/50",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-2",children:"Full Message"}),e.jsx("div",{className:"bg-gray-900/50 rounded-lg p-4",children:e.jsx("p",{className:"text-gray-300 whitespace-pre-wrap",children:s.message})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-2",children:"Submission Details"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Submitted:"}),e.jsx("span",{className:"text-gray-300",children:g(s.created_at)})]}),s.updated_at&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Last Updated:"}),e.jsx("span",{className:"text-gray-300",children:g(s.updated_at)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Message ID:"}),e.jsxs("span",{className:"text-gray-300 font-mono text-xs",children:[s.id.substring(0,8),"..."]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-2",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("a",{href:`mailto:${s.email}?subject=Re: ${s.subject||"Your Message"}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 w-full px-3 py-2 bg-blue-500/20 hover:bg-blue-500/30 text-blue-400 rounded-lg transition-colors",children:[e.jsx(D,{size:14}),"Reply via Email"]}),e.jsxs("button",{onClick:()=>m(),className:"flex items-center gap-2 w-full px-3 py-2 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded-lg transition-colors",children:[e.jsx(L,{size:14}),i?"Email Copied!":"Copy Email Address"]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-4 border-t border-gray-700/50",children:[s.status!=="read"&&e.jsxs("button",{onClick:()=>p("read"),className:"flex items-center gap-2 px-4 py-2 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded-lg transition-colors",children:[e.jsx(R,{size:14}),"Mark as Read"]}),s.status!=="replied"&&e.jsxs("button",{onClick:()=>p("replied"),className:"flex items-center gap-2 px-4 py-2 bg-green-500/20 hover:bg-green-500/30 text-green-400 rounded-lg transition-colors",children:[e.jsx(D,{size:14}),"Mark as Replied"]}),s.status!=="archived"&&e.jsxs("button",{onClick:()=>p("archived"),className:"flex items-center gap-2 px-4 py-2 bg-purple-500/20 hover:bg-purple-500/30 text-purple-400 rounded-lg transition-colors",children:[e.jsx(ue,{size:14}),"Archive"]}),e.jsxs("button",{onClick:()=>n(s.id),className:"flex items-center gap-2 px-4 py-2 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg transition-colors ml-auto",children:[e.jsx(he,{size:14}),"Delete"]})]})]})}),!a&&e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 mt-4 pt-4 border-t border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>p("read"),className:"flex items-center gap-1 px-3 py-1 text-xs bg-gray-700 hover:bg-gray-600 text-gray-300 rounded transition-colors",children:[e.jsx(R,{size:12}),"Read"]}),e.jsxs("button",{onClick:()=>p("replied"),className:"flex items-center gap-1 px-3 py-1 text-xs bg-green-500/20 hover:bg-green-500/30 text-green-400 rounded transition-colors",children:[e.jsx(D,{size:12}),"Replied"]}),e.jsxs("button",{onClick:()=>window.open(`mailto:${s.email}`,"_blank"),className:"flex items-center gap-1 px-3 py-1 text-xs bg-blue-500/20 hover:bg-blue-500/30 text-blue-400 rounded transition-colors",children:[e.jsx(C,{size:12}),"Reply"]})]}),e.jsx("button",{onClick:()=>l(!0),className:"text-sm text-green-400 hover:text-green-300 transition-colors",children:"View Details â†’"})]})]})},Fe=({messages:s,onStatusUpdate:t,onDelete:r})=>{const n=a=>{switch(a){case"unread":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"read":return"bg-gray-500/20 text-gray-400 border-gray-500/30";case"replied":return"bg-green-500/20 text-green-400 border-green-500/30";case"archived":return"bg-purple-500/20 text-purple-400 border-purple-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}};return e.jsx("div",{className:"space-y-4",children:s.map(a=>e.jsx("div",{className:"bg-gray-800/30 border border-gray-700/50 rounded-xl overflow-hidden hover:border-green-500/30 transition-all duration-300",children:e.jsx(Pe,{message:a,statusColor:n(a.status),onStatusUpdate:t,onDelete:r})},a.id))})};function Ue(){return e.jsx("div",{children:"MessageFilters"})}const J=({size:s="medium",text:t="Loading..."})=>{const r={small:"w-8 h-8",medium:"w-12 h-12",large:"w-16 h-16"};return e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[e.jsx("div",{className:`${r[s]} border-4 border-gray-700 border-t-green-500 rounded-full animate-spin`}),t&&e.jsx("p",{className:"text-gray-400 animate-pulse",children:t})]})},Ie=()=>{const[s,t]=x.useState([]),[r,n]=x.useState(!0),[a,l]=x.useState(""),[i,h]=x.useState({status:"",search:"",startDate:"",endDate:""}),[g,m]=x.useState({page:1,limit:10,total:0,totalPages:0}),[p,o]=x.useState({total:0,unread:0,replied:0}),c=x.useCallback(async()=>{var u;n(!0),l("");try{console.log("ðŸ“¥ Fetching messages...");const f=await S.getMessages(g.page,g.limit,i);console.log("âœ… Messages fetched:",(u=f.messages)==null?void 0:u.length),t(f.messages||[]),m(V=>({...V,total:f.total,totalPages:f.totalPages}))}catch(f){console.error("âŒ Error fetching messages:",f),l(f.message||"Failed to fetch messages")}finally{n(!1)}},[g.page,g.limit,i]),d=x.useCallback(async()=>{try{console.log("ðŸ“Š Fetching statistics...");const u=await S.getStatistics();console.log("âœ… Statistics:",u),o(u)}catch(u){console.error("âŒ Error fetching stats:",u)}},[]);x.useEffect(()=>{(async()=>{try{await c(),await d()}catch(f){console.error("Failed to load data:",f)}})()},[c,d]);const v=u=>{console.log("ðŸŽ›ï¸ Filter changed:",u),h(u),m(f=>({...f,page:1}))},b=()=>{console.log("ðŸ”„ Refreshing data..."),c(),d()};return r&&s.length===0?e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx(J,{text:"Loading messages..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-white",children:"Messages"}),e.jsxs("p",{className:"text-gray-400 mt-1",children:["Total: ",p.total," â€¢ Unread: ",p.unread," â€¢ Replied: ",p.replied]})]}),e.jsxs("button",{onClick:b,disabled:r,className:"flex items-center gap-2 bg-gray-800 hover:bg-gray-700 border border-green-500/30 text-green-400 px-4 py-2 rounded-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(pe,{size:18,className:r?"animate-spin":""}),r?"Refreshing...":"Refresh"]})]}),a&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(K,{className:"w-5 h-5 text-red-400 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-400 font-medium",children:"Error loading messages"}),e.jsx("p",{className:"text-red-400/80 text-sm mt-1",children:a}),e.jsx("button",{onClick:b,className:"mt-2 text-sm text-red-300 hover:text-red-200 underline",children:"Try again"})]})]})}),e.jsx(Ue,{filters:i,onChange:v}),s.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-800/30 border border-gray-700/50 rounded-xl",children:[e.jsx(N,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-300 mb-2",children:"No messages found"}),e.jsx("p",{className:"text-gray-500",children:"No contact form submissions match your filters"}),e.jsx("button",{onClick:()=>{h({status:"",search:"",startDate:"",endDate:""}),b()},className:"mt-4 text-green-400 hover:text-green-300 underline",children:"Clear filters"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Fe,{messages:s}),g.totalPages>1&&e.jsxs("div",{className:"flex justify-center items-center gap-4 mt-8",children:[e.jsx("button",{onClick:()=>m(u=>({...u,page:u.page-1})),disabled:g.page===1,className:"px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-700 transition-colors",children:"Previous"}),e.jsxs("span",{className:"text-gray-300",children:["Page ",g.page," of ",g.totalPages]}),e.jsx("button",{onClick:()=>m(u=>({...u,page:u.page+1})),disabled:g.page===g.totalPages,className:"px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-700 transition-colors",children:"Next"})]})]})]})},Te=()=>{var g;const{user:s,signOut:t}=E(),r=q(),n=ee(),[a,l]=x.useState(!1),i=async()=>{await t(),r("/login")},h=[{path:"/dashboard",icon:e.jsx(Ne,{size:20}),label:"Dashboard"},{path:"/messages",icon:e.jsx(N,{size:20}),label:"Messages"}];return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-black",children:[e.jsx("div",{className:"lg:hidden fixed top-4 left-4 z-50",children:e.jsx("button",{onClick:()=>l(!a),className:"p-2 bg-gray-800/50 backdrop-blur-sm border border-gray-700 rounded-lg text-white hover:bg-gray-700 transition-colors",children:a?e.jsx(be,{size:24}):e.jsx(fe,{size:24})})}),a&&e.jsxs("div",{className:"lg:hidden fixed inset-0 z-40",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>l(!1)}),e.jsxs("div",{className:"fixed inset-y-0 left-0 w-64 bg-gray-900 border-r border-gray-800 p-6 overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-500 rounded-lg flex items-center justify-center",children:e.jsx(N,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-white",children:"Admin Panel"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Contact Messages"})]})]}),e.jsx("div",{className:"space-y-2 mb-8",children:h.map(m=>e.jsxs(_,{to:m.path,onClick:()=>l(!1),className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${n.pathname===m.path?"bg-green-500/10 text-green-400 border border-green-500/30":"text-gray-300 hover:bg-gray-800"}`,children:[m.icon,e.jsx("span",{className:"font-medium",children:m.label}),n.pathname===m.path&&e.jsx(O,{className:"ml-auto",size:16})]},m.path))}),e.jsxs("div",{className:"mt-auto pt-8 border-t border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center",children:e.jsx(G,{size:16})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-white truncate",children:(s==null?void 0:s.email)||"Admin"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Administrator"})]})]}),e.jsxs("button",{onClick:i,className:"flex items-center gap-3 w-full px-4 py-3 mt-2 text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",children:[e.jsx(P,{size:18}),e.jsx("span",{className:"font-medium",children:"Logout"})]})]})]})]}),e.jsxs("div",{className:"hidden lg:flex fixed inset-y-0 left-0 w-64 bg-gray-900/50 backdrop-blur-sm border-r border-gray-800 flex-col p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-500 rounded-lg flex items-center justify-center",children:e.jsx(N,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-white",children:"Admin Panel"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Contact Messages"})]})]}),e.jsx("nav",{className:"space-y-2 flex-1",children:h.map(m=>e.jsxs(_,{to:m.path,className:`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${n.pathname===m.path?"bg-green-500/10 text-green-400 border border-green-500/30":"text-gray-300 hover:bg-gray-800/50"}`,children:[m.icon,e.jsx("span",{className:"font-medium",children:m.label}),n.pathname===m.path&&e.jsx(O,{className:"ml-auto",size:16})]},m.path))}),e.jsxs("div",{className:"mt-auto pt-8 border-t border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-green-500 to-emerald-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-bold text-white",children:((g=s==null?void 0:s.email)==null?void 0:g.charAt(0).toUpperCase())||"A"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-white truncate",children:(s==null?void 0:s.email)||"Admin"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Administrator"})]})]}),e.jsxs("button",{onClick:i,className:"flex items-center gap-3 w-full px-4 py-3 mt-2 text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",children:[e.jsx(P,{size:18}),e.jsx("span",{className:"font-medium",children:"Logout"})]})]})]}),e.jsxs("div",{className:"lg:pl-64",children:[e.jsx("header",{className:"sticky top-0 z-30 bg-gray-900/50 backdrop-blur-sm border-b border-gray-800 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-white",children:[n.pathname==="/dashboard"&&"Dashboard",n.pathname==="/messages"&&"Messages"]}),e.jsxs("p",{className:"text-sm text-gray-400",children:[n.pathname==="/dashboard"&&"Overview of your messages",n.pathname==="/messages"&&"Manage contact form submissions"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{className:"p-2 text-gray-400 hover:text-white hover:bg-gray-800 rounded-lg transition-colors",children:e.jsx(je,{size:20})}),e.jsx("button",{className:"p-2 text-gray-400 hover:text-white hover:bg-gray-800 rounded-lg transition-colors",children:e.jsx(ye,{size:20})})]})]})}),e.jsx("main",{className:"p-6",children:e.jsx(se,{})})]})]})},Be=({children:s})=>{const{user:t,loading:r}=E();return r?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900",children:e.jsx(J,{})}):t?s:e.jsx(k,{to:"/login",replace:!0})};function $e(){return e.jsx(te,{children:e.jsx(_e,{children:e.jsxs(ae,{children:[e.jsx(w,{path:"/login",element:e.jsx(Le,{})}),e.jsxs(w,{path:"/",element:e.jsx(Be,{children:e.jsx(Te,{})}),children:[e.jsx(w,{index:!0,element:e.jsx(k,{to:"/dashboard",replace:!0})}),e.jsx(w,{path:"dashboard",element:e.jsx(Oe,{})}),e.jsx(w,{path:"messages",element:e.jsx(Ie,{})})]}),e.jsx(w,{path:"*",element:e.jsx(k,{to:"/login",replace:!0})})]})})})}z.createRoot(document.getElementById("root")).render(e.jsx(re.StrictMode,{children:e.jsx($e,{})}));
